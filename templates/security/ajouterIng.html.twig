{% extends 'base.html.twig' %}

{% block title %}Recettes EASY
{% endblock %}

{% block body %}
	{% if not app.user  %}
		<p>Vous devez être connecté pour ajouter une recette.
		</p>

	{% else %}
		<div class="example-wrapper" style="margin: 1em auto;
																								    max-width: 800px;
																								    width: 95%;
																								    font: 18px/1.5 sans-serif;">
			<h1 style="text-align: center;margin-bottom: 50px;margin-top: 50px;">Ajouter les quantités</h1>

			{{ form_start(formAddIng)}}
			{{ form_row(formAddIng.quantite)}}


			{{ form_row(formAddIng.idrecette)}}

			{# {{ form_row(formAddIng.iding)}} #}


			<label for="validationDefault02">Ingrédient</label>
			<select id="ingredient" name="ingredient[]" id="" class="selectpicker">

				{% for ing in listeIng %}}
					<option value="{{ ing.iding }}">
						{{ ing.ingredient}}
					</option>
				{% endfor %}
			</select>

			<div class="col-md-6 mb-3">
				<div class="form-check-inline">
					<input type="checkbox" class="form-control" id="addNewIngredient" name="addNewIngredient">
					<label for="addNewIngredient">Ajouter un nouvel ingrédient</label>
				</div>

				<div id="addIngredient" style="display:none;">
					<div class='newIngContent'>
						<input disabled="disabled" type="text" class="form-control" name="nomNewIngredient[]">
					</div>
					<button type="button" onclick="addInputNewIngredient()">Ajouter un nouvel ingrédient</button>
				</div>
			</div>

			<div class="form-group row">
				<button type="submit" class="btn btn-success" style="margin: auto;">Ajouter</button>
			</div>
			{{ form_end(formAddIng)}}

		</div>
	{% endif %}

	<script>
		$('.selectpicker').selectpicker();

function addInputNewIngredient() {
var input = $("#addIngredient .newIngContent input:first-child");
input.clone().appendTo("#addIngredient .newIngContent").val("");
}

// Rend actif ou innactif le bloc "Ajouter un nouvel Ingredient"
$("#addNewIngredient").on("click", function () {
$("#addIngredient").toggle();

var inputAdd = $("#addIngredient input");
var display = inputAdd.css('display');
if (display === "none") {
inputAdd.prop("disabled", "disabled");
inputAdd.attr("disabled", "disabled");

} else {
inputAdd.removeProp("disabled");
inputAdd.removeAttr("disabled");
}
});
	</script>

{% endblock %}
